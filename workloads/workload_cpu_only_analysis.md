root@H100-136-velinux2:/home/ynxia/playground/dlrm/workloads# python hatchet_analysis.py 
🚀 DLRM CPU+GPU 性能分析工具 - 专家增强版
============================================================
正在加载 hpctoolkit-python3.11-database-cpu...
DATA IMPORTED
✓ 数据库加载成功
📈 数据概览: 6619 个函数/调用点, 3 个指标

==================================================
🧮 所有可用的指标列
==================================================
总共 3 个指标:

🕒 时间相关:
    time
    time (inc)

🧮 其他:
    name

==================================================
📊 计算派生指标
==================================================
✓ 添加了 0 个派生指标:

==================================================
🔬 计算高级派生指标 (CPU/GPU比例, 带宽)
==================================================
🔍 找到的关键列:
  时间列: time (inc)
  可用GPU时间列: []
  H2D传输列: None
  D2H传输列: None
✓ 总共添加了 0 个高级指标:

==================================================
📏 工作负载规模评估
==================================================
⏱️  总运行时间: 1,695 (时间单位)

📋 规模评估结果:
✅ 工作负载规模看起来合适

==================================================
📊 CPU vs GPU 详细分布分析
==================================================
🔍 关键性能指标:
  ⏱️  总时间: 1,695
  🔥 最耗时函数:
     1. entry: 45
     2. src/home/ynxia/playground/param/train/workloads/dlrm/dlrm_s_pytorch.py:1076: 30
     3. backward: 30

==================================================
🌐 数据传输带宽分析
==================================================
⚠️  缺少时间或数据传输指标

==================================================
⚡ GPU Kernel 详细效率分析
==================================================

==================================================
🔥 热点分析 (Top 10 函数)
==================================================
📊 Top 10 热点函数详细分析:
(按总时间排序)

+-----------------------------------------------------------------+--------------+
| name                                                            |   time (inc) |
+=================================================================+==============+
| entry                                                           |           45 |
+-----------------------------------------------------------------+--------------+
| backward                                                        |           30 |
+-----------------------------------------------------------------+--------------+
| backward                                                        |           30 |
+-----------------------------------------------------------------+--------------+
| src/home/ynxia/playground/param/.venv/lib/python3.11/site-pa... |           30 |
+-----------------------------------------------------------------+--------------+
| src/home/ynxia/playground/param/.venv/lib/python3.11/site-pa... |           30 |
+-----------------------------------------------------------------+--------------+
| src/home/ynxia/playground/param/train/workloads/dlrm/dlrm_s_... |           30 |
+-----------------------------------------------------------------+--------------+
| _engine_run_backward                                            |           30 |
+-----------------------------------------------------------------+--------------+
| [libtorch_python.so]:0                                          |           30 |
+-----------------------------------------------------------------+--------------+
| src/home/ynxia/playground/param/.venv/lib/python3.11/site-pa... |           30 |
+-----------------------------------------------------------------+--------------+
| THPEngine_run_backward(_object*, _object*, _object*)            |           30 |
+-----------------------------------------------------------------+--------------+

==================================================
⚡ GPU Kernel 专项分析
==================================================
🎯 GPU Kernel 相关函数:
  1. [libtorch_cuda.so]:0: 29
  2. /home/ynxia/playground/param/.venv/lib/python3.11/site-packages/torch/lib/libc10_cuda.so:373385: 29
  3. cudaGetDeviceCount: 29
  4. at::cuda::detail::CUDAHooks::hasCUDA() const: 29
  5. /home/ynxia/playground/param/.venv/lib/python3.11/site-packages/nvidia/cuda_runtime/lib/libcudart.so.12:237055: 29

==================================================
🐍 Python 栈耗时专项分析
==================================================
📈 Python 代码热点:
  1. src/home/ynxia/playground/param/.venv/lib/python3.11/site-packages/torch/_tensor.py:626: 30 (1.8%)
  2. src/home/ynxia/playground/param/.venv/lib/python3.11/site-packages/torch/autograd/__init__.py:347: 30 (1.8%)
  3. src/home/ynxia/playground/param/train/workloads/dlrm/dlrm_s_pytorch.py:1076: 30 (1.8%)
  4. src/home/ynxia/playground/param/.venv/lib/python3.11/site-packages/torch/autograd/graph.py:823: 30 (1.8%)
  5. [libtorch_python.so]:0: 30 (1.8%)

==================================================
💡 增强优化建议
==================================================

============================================================
✅ 专家级分析完成！
============================================================